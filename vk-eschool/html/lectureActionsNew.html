<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="css.css">
  <title>Pamokos pridėjimas</title>
  <meta charset="utf-8">
</head>
<body>


<div align="center" class="container ">

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <ul class="nav navbar-nav">
    <li><font size="6" color="white">@VK</font></li>
    <li><a href='/userProfile'>Paskyra</a></li>
    <li><a href='/lectureList'>Pamokos</a></li>
    <li><a href='/userLecture'>Mano pamokos</a></li>
	</ul>
	<ul class="nav navbar-nav navbar-right">
		<li><a href="/logout"><span class="glyphicon glyphicon-off"></span>Atsijungti</a></li>
    </ul>
  </div>
</nav>

	<br>
	<br>
	<br>
  <img  align="center" class="img-responsive" src="img/logo.png">
	<br>
	<img  align="center" class="img-responsive" src="img/asmensDuomenys3.png">

	<br>
	<br>


	<div class="row">

	<div class="col-sm-2 col-md-2 col-lg-4">
	</div>

	<div class="col-sm-2 col-md-2 col-lg-4">

    <h3>Klausimas/atsakymas</h3>
    <form class="form-inline">

  	<div class="input-group">
  		<span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
  		<textarea class="form-control" rows="5" name="task" placeholder="Klausimas"></textarea>
      </div>

  	<br>
  	<br>

      <div class="input-group">
  		<span class="input-group-addon"><i class="glyphicon glyphicon-ok-sign"></i></span>
  		<textarea class="form-control" rows="5" name="answer" placeholder="Atsakymas"></textarea>
  		<!--<input type="email" class="form-control" id="email" placeholder="El. paštas">-->
      </div>
  	</form>

    <h3>Pavyzdžiai</h3>
    <form class="form-inline">

  	<div class="input-group">
  		<span class="input-group-addon"><i class="glyphicon glyphicon-font"></i></span>
  		<input type="text" class="form-control" name="slideName" placeholder="Skaidrės pavadinimas">
      </div>

  	<br>
  	<br>

      <div class="input-group">
  		<span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
  		<textarea class="form-control" rows="5" name="slideInfo" placeholder="Aprašymas"></textarea>
  		<!--<input type="email" class="form-control" id="email" placeholder="El. paštas">-->
      </div>
  	</form>

	</div>

	<div class="col-sm-2 col-md-2 col-lg-4">
	</div>

	</div>
</div>

	<br>
	<br>

	<p align="center"><button type="button" class="buttonCont btn btn-primary btn-xl">Tęsti</button></p>

	<p align="center"><button type="button" class="themeAdd btn btn-primary btn-xl">Atšaukti</button></a></p>

  </form>


<footer>
  <p align="center" class="blurry-text" ><font align="center" size="2">Visos teisės saugomos</font></p>
</footer>

<script>
$(document).ready(function) {
  var slidesContent = $(".slides");
  var tasksContent = $(".tasks");
  var newSlideAdd = $(".newSlideAdd");
  var newTaskAdd = $(".newTaskAdd");

  var form = {
    description: $('textarea[name="description"]').val(),
    level: $('select[name="level"] option:selected').val(),
    programmingLanguage: $('select[name="programmingLanguage"] option:selected').val(),
    themes: [],
  };

  var formVars = function() {
    form.description = $('textarea[name="description"]').val();
    form.level = $('select[name="level"] option:selected').val();
    form.programmingLanguage = $('select[name="programmingLanguage"] option:selected').val();
    form['themes'].push({
      name: $('input[name="theme"]').val(),
      tasks: []
    })
    $('.tasks').children('.taskPlace').each(function() {
      var t = {
        task: $(this).find('input[name="task"]').val(),
        answer: $(this).find('input[name="answer"]').val(),
        slides: []
      };

      $(this).find('.slidePlace').each(function) {
        var slide = {
          name: $(this).find('input[name="slideName"]').val(),
          info: $(this).find('textarea[name="slideInfo"]').val()
        }
        t['slides'].push(slide);
      });
      form.themes[form.themes.length-1].tasks.push(t);
    });
    return form;
  };

  $(taskAdd).click(function(e) {
    $(tasksContent).append(

      '<div class="taskPlace">' +
      <h3>Klausimas/atsakymas</h3> 
      <form class="form-inline">
	  
		<div class="input-group">
    		<span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
    		<textarea class="form-control" rows="5" name="task" placeholder="Klausimas"></textarea>
        </div>

    	<br>
    	<br>

        <div class="input-group">
    		<span class="input-group-addon"><i class="glyphicon glyphicon-ok-sign"></i></span>
    		<textarea class="form-control" rows="5" name="answer" placeholder="Atsakymas"></textarea>
    		<!--<input type="email" class="form-control" id="email" placeholder="El. paštas">-->
        </div>
    	</form>

      <div class="slidePlace">
      <h3>Pavyzdžiai</h3>
      <form class="form-inline">

    	<div class="input-group">
    		<span class="input-group-addon"><i class="glyphicon glyphicon-font"></i></span>
    		<input type="text" class="form-control" name="slideName" placeholder="Skaidrės pavadinimas">
        </div>

        <div class="input-group">
        <span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
        <textarea class="form-control" rows="5" name="slideInfo" placeholder="Aprašymas"></textarea>
        </div>
        <button type="button" class="glyphicon glyphicon-plus newSlideAdd"><button>
      </div>
    );
    $(".newSlideAdd").on("click", function(e) {
      $(this).parent('div').append(
        <div class="slidePlace">
        <h3>Pavyzdžiai</h3>
        <form class="form-inline">

      	<div class="input-group">
      		<span class="input-group-addon"><i class="glyphicon glyphicon-font"></i></span>
      		<input type="text" class="form-control" name="slideName" placeholder="Skaidrės pavadinimas">
          </div>

          <div class="input-group">
          <span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
          <textarea class="form-control" rows="5" name="slideInfo" placeholder="Aprašymas"></textarea>
          </div>
          <button type="button" class="glyphicon glyphicon-remove slideDelete" name=""></button>
        </div>
      );

      $(".slideDelete").on("click", function(e) {
        $(this).parent('div').remove();
      });
    });
  });
}

$(".newSlideAdd").on("click", function(e) {
  $(this).parent('div').append(
    <div class="slidePlace">
    <h3>Pavyzdžiai</h3>
    <form class="form-inline">

    <div class="input-group">
      <span class="input-group-addon"><i class="glyphicon glyphicon-font"></i></span>
      <input type="text" class="form-control" name="slideName" placeholder="Skaidrės pavadinimas">
      </div>

      <div class="input-group">
      <span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
      <textarea class="form-control" rows="5" name="slideInfo" placeholder="Aprašymas"></textarea>
      </div>
      <button type="button" class="glyphicon glyphicon-remove slideDelete" name=""></button>
    </div>
  );
  $(".slideDelete").on("click", function(e) {
    $(this).parent('div').remove();
  });
});

$(".buttonCont").click(function(e) {
  var formedVars = formVars();
  $.ajax({
    url: '/lectureAdd',
    type: 'POST',
    data: formedVars,
    success: function(responseData, textStatus, jqXHR) {
      alert("Pamoka sukurta");
    },
    error: function(jqXHR, textStatus, errorThrown) {
      console.log('error');
    }
  });
});

$('.themeAdd').click(function(e, me) {
  var formedVars = formVars();
  var cookie = Cookies.getJSON("formedVars");
  console.log(cookie);
  if(formedVars == undefined) {
    Cookies.set("formedVars", Array.prototype.push.apply(Cookies.set("formedVars").themes, formedVars.themes));
  } else (
    Cookies.set("formedVars", formedVars);
  );
  console.log("cookie:" + Cookies.get("formedVars"));
});
</script>

</body>

</html>
